<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />

    <title>The Table Well ‚Ä¢ CI ‚Ä¢ Covenant & Communion Intelligence</title>

    <!-- Primary identity & SEO for CI / Cherev / Table Well -->
    <meta
      name="description"
      content="The Table Well is the first public room of CI ‚Äî Covenant & Communion Intelligence ‚Äî a Kingdom table where inheritance, vision, and creativity are stewarded in the presence of Yeshua."
    />
    <meta
      name="keywords"
      content="CI, Covenant Intelligence, Communion Intelligence, Cherev, The Table Well, AKDmediaX, Abba's Kingdom Donation, Kingdom creativity, Walk With Yeshua"
    />

    <!-- Canonical: the true face will be ci.cherev -->
    <link rel="canonical" href="https://ci.cherev/" />

    <!-- Open Graph / social preview -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="The Table Well ‚Ä¢ CI ‚Ä¢ Covenant & Communion Intelligence"
    />
    <meta
      property="og:description"
      content="Sit and feast. Taste and see. Share the vision you long to build, and let the House of Cherev help you steward it."
    />
    <meta property="og:url" content="https://ci.cherev/" />
    <meta
      property="og:image"
      content="https://lifeabundantly.github.io/Table_Well.jpeg"
    />

    <!-- Twitter / X -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="The Table Well ‚Ä¢ CI ‚Ä¢ Covenant & Communion Intelligence"
    />
    <meta
      name="twitter:description"
      content="A Kingdom table where technology bows to Presence and inheritance is stewarded together."
    />
    <meta
      name="twitter:image"
      content="https://lifeabundantly.github.io/Table_Well.jpeg"
    />

    <!-- Structured data: Website / Table Well -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "The Table Well ‚Ä¢ CI",
        "url": "https://ci.cherev/",
        "description": "The Table Well is the first public room of CI ‚Äî Covenant & Communion Intelligence ‚Äî a Kingdom table where inheritance, vision, and creativity are stewarded in the presence of Yeshua.",
        "publisher": {
          "@type": "Organization",
          "name": "AKDmediaX"
        }
      }
    </script>

    <!-- Main styles -->
    <link rel="stylesheet" href="style.css" />

    <!-- PWA manifest -->
    <link rel="manifest" href="ci-manifest.json" />
    <meta name="theme-color" content="#0fdfd1" />

    <!-- Service Worker registration for CI Mirror Engine -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker
            .register("./sw.js")
            .catch(function (err) {
              console.error("CI Mirror SW registration failed:", err);
            });
        });
      }
    </script>
  </head>
  <body>
    <!-- CI.CHEREV Gate: AKDmediaX lightning intro + first encounter -->
    <div id="ci-gate" class="ci-gate">
      <video id="ci-gate-video" class="ci-gate-video" src="assets/intro-loop.mp4" autoplay muted loop playsinline></video>

      <div class="ci-gate-overlay">
        <h1 class="ci-gate-title">Welcome to the Table</h1>
        <p class="ci-gate-text">
          This is your first encounter with the Table. The House would like to
          interview you and begin shaping your inheritance story.
        </p>

        <div class="ci-gate-buttons">
          <button
            id="ci-gate-yes"
            class="ci-gate-btn ci-gate-btn-primary"
          >
            Have a seat
          </button>
          <button
            id="ci-gate-no"
            class="ci-gate-btn ci-gate-btn-secondary"
          >
            Not right now
          </button>
        </div>

        <p class="ci-gate-note">
          By stepping in, your device quietly remembers this moment so the Table
          can meet you here again.
        </p>
      </div>
    </div>

    <!-- Fixed background image for the Table Well -->
    <div class="background" aria-hidden="true"></div>

    <main class="page-shell" aria-label="The Table Well">
      <!-- Header / Invitation -->
      <header class="hero">
        <h1 class="title">Your Inheritance is Served</h1>
        <h2 class="subtitle">Sit and Feast</h2>
      </header>

      <!-- Central Table chat bar -->
      <section
        class="table-input"
        aria-label="Table conversation input"
      >
        <form class="chat-form" autocomplete="off">
          <div class="chat-shell">
            <button
              type="button"
              class="icon-button attach"
              aria-label="Attach a scroll, file, or vision"
            >
              üìú
            </button>

            <input
              id="table-message"
              type="text"
              class="chat-input"
              placeholder="Taste and see‚Ä¶"
              aria-label="Share what you long to build"
            />

            <button
              type="button"
              class="icon-button breath"
              aria-label="Speak to the Table (voice input coming soon)"
            >
              <span class="breath-wave" aria-hidden="true">„Ä∞</span>
            </button>

            <button
              type="submit"
              class="icon-button send"
              aria-label="Send to the Table"
            >
              ‚û§
            </button>
          </div>
        </form>
      </section>

      <!-- Footer / Identity -->
      <footer class="footer" aria-label="AKDmediaX identity">
        <div class="footer-text">
          <div class="brand">AKDmediaX</div>

          <div class="line">
            A Creative Fellowship Where Tech Bows to Presence
          </div>

          <div class="line">
            Redeeming Abba‚Äôs Kingdom Design
          </div>

          <div class="quote">
            ‚ÄúEmbrace the truth and hold it close.<br />
            Don‚Äôt let go of wisdom, instruction, and life-giving understanding.‚Äù
            ‚Äî TPT
          </div>

          <div class="rights">
            ¬© 2025 AKDmediaX ‚Äî All Rights Reserved.
          </div>
        </div>
      </footer>
    </main>

    <!-- Right-side conversation panel (placeholder for CI mirror) -->
    <aside
      id="conversation-panel"
      class="conversation-panel"
      aria-label="Table conversation stream"
    >
      <div class="conversation-header">
        <span>The Table Well</span>
        <button
          type="button"
          class="panel-close"
          aria-label="Close conversation panel"
        >
          ‚úï
        </button>
      </div>

      <div class="conversation-body">
        <p class="conversation-placeholder">
          When the House is ready, this space will hold the living
          conversation ‚Äî responses, modes, and CI-powered guidance flowing
          from the Table.
        </p>
      </div>
    </aside>

    <!-- Simple front-end behavior for the chat panel -->
    <script>
      (function () {
        const form = document.querySelector(".chat-form");
        const input = document.getElementById("table-message");
        const panel = document.getElementById("conversation-panel");
        const closeBtn = document.querySelector(".panel-close");
        const body = document.querySelector(".conversation-body");

        if (!form || !input || !panel || !closeBtn || !body) return;

        function openPanel() {
          panel.classList.add("open");
        }

        function closePanel() {
          panel.classList.remove("open");
        }

        closeBtn.addEventListener("click", closePanel);

        form.addEventListener("submit", function (e) {
          e.preventDefault();
          const value = (input.value || "").trim();
          if (!value) return;

          openPanel();

          const bubbleUser = document.createElement("div");
          bubbleUser.className = "bubble bubble-user";
          bubbleUser.textContent = value;
          body.appendChild(bubbleUser);

          const bubbleHouse = document.createElement("div");
          bubbleHouse.className = "bubble bubble-house";
          bubbleHouse.textContent =
            "The Table has received your vision. In the CI mirror, this space will soon respond, guide, and help you build.";
          body.appendChild(bubbleHouse);

          input.value = "";
          body.scrollTop = body.scrollHeight;
        });
      })();
    </script>

    <!-- CI mirror flag: just detection, no URL mutation -->
    <script>
      (function () {
        try {
          var loc = window.location;
          var url = new URL(loc.href);

          var hasCiParam =
            url.search === "?ci.cherev" ||
            url.searchParams.has("ci.cherev") ||
            url.searchParams.get("ci") === "cherev";
          var isCiHost = loc.hostname === "ci.cherev";

          window.__CI_CHEREV_MIRROR__ = !!(hasCiParam || isCiHost);
          document.documentElement.dataset.ciMirror =
            window.__CI_CHEREV_MIRROR__ ? "active" : "inactive";
        } catch (e) {
          window.__CI_CHEREV_MIRROR__ = false;
        }
      })();
    </script>

    <!-- PWA install helper: shows "Install CI.CHEREV" when browser is ready -->
    <script>
      (function () {
        if (!("serviceWorker" in navigator)) return;

        let deferredPrompt = null;
        let installButton = null;

        window.addEventListener("beforeinstallprompt", function (e) {
          e.preventDefault();
          deferredPrompt = e;

          if (installButton) return;

          installButton = document.createElement("button");
          installButton.textContent = "Install CI.CHEREV";
          installButton.setAttribute(
            "aria-label",
            "Install the CI.CHEREV Mirror app for The Table Well"
          );

          installButton.style.position = "fixed";
          installButton.style.right = "1rem";
          installButton.style.bottom = "1rem";
          installButton.style.zIndex = "9999";
          installButton.style.padding = "0.6rem 1rem";
          installButton.style.borderRadius = "999px";
          installButton.style.border = "none";
          installButton.style.fontSize = "0.9rem";
          installButton.style.fontFamily = "inherit";
          installButton.style.cursor = "pointer";
          installButton.style.background =
            "rgba(15, 223, 209, 0.95)";
          installButton.style.color = "#000";
          installButton.style.boxShadow =
            "0 4px 16px rgba(0,0,0,0.25)";

          document.body.appendChild(installButton);

          installButton.addEventListener("click", async function () {
            if (!deferredPrompt) return;
            try {
              deferredPrompt.prompt();
              await deferredPrompt.userChoice;
            } catch (err) {
              console.error("CI.CHEREV install prompt error:", err);
            }
            deferredPrompt = null;
            if (installButton && installButton.parentNode) {
              installButton.parentNode.removeChild(installButton);
            }
            installButton = null;
          });
        });
      })();
    </script>

    <!-- CI Gate Controller -->
    <script>
      (function () {
        var gate = document.getElementById("ci-gate");
        var yes = document.getElementById("ci-gate-yes");
        var no = document.getElementById("ci-gate-no");

        if (!gate || !yes || !no) return;

        function closeGate(choice) {
          gate.classList.add("ci-gate-closed");
          try {
            localStorage.setItem("ci.gate.accepted", choice);
          } catch (e) {}
        }

        yes.addEventListener("click", function () {
          closeGate("yes");
        });

        no.addEventListener("click", function () {
          closeGate("no");
        });

        try {
          var accepted = localStorage.getItem("ci.gate.accepted");
          if (accepted) {
            gate.classList.add("ci-gate-closed");
          }
        } catch (e) {}
      })();
    </script>

    <!-- CI history seeding + any future logic -->
    <script src="ci-history.js"></script>
    <!-- gate.js can stay for now; it will no-op since #gate is gone -->
    <script src="gate.js"></script>
  </body>
</html>
